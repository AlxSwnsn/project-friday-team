{"ast":null,"code":"import _objectSpread from\"/Users/elizavetaspivak/Documents/study/React/project-friday-team/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/elizavetaspivak/Documents/study/React/project-friday-team/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/elizavetaspivak/Documents/study/React/project-friday-team/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{useState}from'react';import SuperInputText from'../../../h4/common/c1-SuperInputText/SuperInputText';import s from'./SuperEditableSpan.module.css';// тип пропсов обычного инпута\nimport{jsx as _jsx}from\"react/jsx-runtime\";var SuperEditableSpan=function SuperEditableSpan(_ref){var autoFocus=_ref.autoFocus,onBlur=_ref.onBlur,onEnter=_ref.onEnter,spanProps=_ref.spanProps,restProps=_objectWithoutProperties(_ref,[\"autoFocus\",\"onBlur\",\"onEnter\",\"spanProps\"]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editMode=_useState2[0],setEditMode=_useState2[1];var _ref2=spanProps||{},children=_ref2.children,onDoubleClick=_ref2.onDoubleClick,className=_ref2.className,restSpanProps=_objectWithoutProperties(_ref2,[\"children\",\"onDoubleClick\",\"className\"]);var onEnterCallback=function onEnterCallback(){// setEditMode() // выключить editMode при нажатии Enter\nsetEditMode(false);onEnter&&onEnter();};var onBlurCallback=function onBlurCallback(e){// setEditMode() // выключить editMode при нажатии за пределами инпута\nsetEditMode(false);onBlur&&onBlur(e);};var onDoubleClickCallBack=function onDoubleClickCallBack(e){// setEditMode() // включить editMode при двойном клике\nsetEditMode(true);onDoubleClick&&onDoubleClick(e);};var spanClassName=\"\".concat(s.spanText,\" \").concat(className);return/*#__PURE__*/_jsx(\"div\",{className:s.editableSpan,children:editMode?/*#__PURE__*/_jsx(SuperInputText,_objectSpread({autoFocus:true// пропсу с булевым значением не обязательно указывать true\n,onBlur:onBlurCallback,onEnter:onEnterCallback},restProps)):/*#__PURE__*/_jsx(\"span\",_objectSpread(_objectSpread({onDoubleClick:onDoubleClickCallBack,className:spanClassName},restSpanProps),{},{children:children||restProps.value}))});};export default SuperEditableSpan;","map":{"version":3,"sources":["/Users/elizavetaspivak/Documents/study/React/project-friday-team/src/Test/h6/common/c4-SuperEditableSpan/SuperEditableSpan.tsx"],"names":["React","useState","SuperInputText","s","SuperEditableSpan","autoFocus","onBlur","onEnter","spanProps","restProps","editMode","setEditMode","children","onDoubleClick","className","restSpanProps","onEnterCallback","onBlurCallback","e","onDoubleClickCallBack","spanClassName","spanText","editableSpan","value"],"mappings":"wjBAAA,MAAOA,CAAAA,KAAP,EAAuEC,QAAvE,KAAsF,OAAtF,CACA,MAAOC,CAAAA,cAAP,KAA2B,qDAA3B,CACA,MAAOC,CAAAA,CAAP,KAAc,gCAAd,CAEA;2CAgBA,GAAMC,CAAAA,iBAAkD,CAAG,QAArDA,CAAAA,iBAAqD,MAStD,IAPGC,CAAAA,SAOH,MAPGA,SAOH,CANGC,MAMH,MANGA,MAMH,CALGC,OAKH,MALGA,OAKH,CAJGC,SAIH,MAJGA,SAIH,CAFMC,SAEN,2FAC+BR,QAAQ,CAAU,KAAV,CADvC,wCACMS,QADN,eACgBC,WADhB,yBAE8DH,SAAS,EAAI,EAF3E,CAEMI,QAFN,OAEMA,QAFN,CAEgBC,aAFhB,OAEgBA,aAFhB,CAE+BC,SAF/B,OAE+BA,SAF/B,CAE6CC,aAF7C,0EAID,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC1B;AACAL,WAAW,CAAC,KAAD,CAAX,CACAJ,OAAO,EAAIA,OAAO,EAAlB,CACH,CAJD,CAKA,GAAMU,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,CAAD,CAA2C,CAC9D;AACAP,WAAW,CAAC,KAAD,CAAX,CACAL,MAAM,EAAIA,MAAM,CAACY,CAAD,CAAhB,CACH,CAJD,CAKA,GAAMC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACD,CAAD,CAAsD,CAChF;AACAP,WAAW,CAAC,IAAD,CAAX,CACAE,aAAa,EAAIA,aAAa,CAACK,CAAD,CAA9B,CACH,CAJD,CAMA,GAAME,CAAAA,aAAa,WAAMjB,CAAC,CAACkB,QAAR,aAAoBP,SAApB,CAAnB,CAEA,mBACI,YAAK,SAAS,CAAEX,CAAC,CAACmB,YAAlB,UACKZ,QAAQ,cAED,KAAC,cAAD,gBACI,SAAS,KAAC;AADd,CAEI,MAAM,CAAEO,cAFZ,CAGI,OAAO,CAAED,eAHb,EAKQP,SALR,EAFC,cAUD,yCACI,aAAa,CAAEU,qBADnB,CAEI,SAAS,CAAEC,aAFf,EAIQL,aAJR,eAOKH,QAAQ,EAAIH,SAAS,CAACc,KAP3B,GAXZ,EADJ,CAyBH,CAxDD,CA0DA,cAAenB,CAAAA,iBAAf","sourcesContent":["import React, {DetailedHTMLProps, InputHTMLAttributes, HTMLAttributes, useState} from 'react'\nimport SuperInputText from '../../../h4/common/c1-SuperInputText/SuperInputText'\nimport s from './SuperEditableSpan.module.css'\n\n// тип пропсов обычного инпута\ntype DefaultInputPropsType = DetailedHTMLProps<InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>\n// тип пропсов обычного спана\ntype DefaultSpanPropsType = DetailedHTMLProps<HTMLAttributes<HTMLSpanElement>, HTMLSpanElement>\n\n// здесь мы говорим что у нашего инпута будут такие же пропсы как у обычного инпута\n// (чтоб не писать value: string, onChange: ...; они уже все описаны в DefaultInputPropsType)\ntype SuperEditableSpanType = DefaultInputPropsType & { // и + ещё пропсы которых нет в стандартном инпуте\n    onChangeText?: (value: string) => void\n    onEnter?: () => void\n    error?: string\n    spanClassName?: string\n\n    spanProps?: DefaultSpanPropsType // пропсы для спана\n}\n\nconst SuperEditableSpan: React.FC<SuperEditableSpanType> = (\n    {\n        autoFocus, // игнорировать изменение этого пропса\n        onBlur,\n        onEnter,\n        spanProps,\n\n        ...restProps// все остальные пропсы попадут в объект restProps\n    }\n) => {\n    const [editMode, setEditMode] = useState<boolean>(false)\n    const {children, onDoubleClick, className, ...restSpanProps} = spanProps || {}\n\n    const onEnterCallback = () => {\n        // setEditMode() // выключить editMode при нажатии Enter\n        setEditMode(false)\n        onEnter && onEnter()\n    }\n    const onBlurCallback = (e: React.FocusEvent<HTMLInputElement>) => {\n        // setEditMode() // выключить editMode при нажатии за пределами инпута\n        setEditMode(false)\n        onBlur && onBlur(e)\n    }\n    const onDoubleClickCallBack = (e: React.MouseEvent<HTMLSpanElement, MouseEvent>) => {\n        // setEditMode() // включить editMode при двойном клике\n        setEditMode(true)\n        onDoubleClick && onDoubleClick(e)\n    }\n\n    const spanClassName = `${s.spanText} ${className}`\n\n    return (\n        <div className={s.editableSpan}>\n            {editMode\n                ? (\n                    <SuperInputText\n                        autoFocus // пропсу с булевым значением не обязательно указывать true\n                        onBlur={onBlurCallback}\n                        onEnter={onEnterCallback}\n\n                        {...restProps} // отдаём инпуту остальные пропсы если они есть (value например там внутри)\n                    />\n                ) : (\n                    <span\n                        onDoubleClick={onDoubleClickCallBack}\n                        className={spanClassName}\n\n                        {...restSpanProps}\n                    >\n                        {/*если нет захардкодженного текста для спана, то значение инпута*/}\n                        {children || restProps.value}\n                    </span>\n                )\n            }\n        </div>\n    )\n}\n\nexport default SuperEditableSpan\n"]},"metadata":{},"sourceType":"module"}