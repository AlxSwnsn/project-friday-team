{"ast":null,"code":"import _objectSpread from\"/Users/elizavetaspivak/Documents/study/React/project-friday-team/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{AuthAPI}from'../dal/api';import{setErrorAC,setStatusAC}from'./app-reducer';var initialState={isRegister:false};export var registerReducer=function registerReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case'SET-REGISTER-STATUS':return _objectSpread(_objectSpread({},state),{},{isRegister:action.isRegister});default:return state;}};export var setRegisterStatus=function setRegisterStatus(isRegister){return{type:'SET-REGISTER-STATUS',isRegister:isRegister};};export var CreateUserThunk=function CreateUserThunk(email,password){return function(dispatch){dispatch(setStatusAC(true));AuthAPI.createUser(email,password).then(function(res){dispatch(setStatusAC(false));dispatch(setRegisterStatus(true));}).catch(function(error){if(!error.error){dispatch(setErrorAC('Some Error! More details in console.'));}else{dispatch(setErrorAC(error.error));}dispatch(setStatusAC(false));});};};","map":{"version":3,"sources":["/Users/elizavetaspivak/Documents/study/React/project-friday-team/src/state/register-reducer.ts"],"names":["AuthAPI","setErrorAC","setStatusAC","initialState","isRegister","registerReducer","state","action","type","setRegisterStatus","CreateUserThunk","email","password","dispatch","createUser","then","res","catch","error"],"mappings":"sLACA,OAAQA,OAAR,KAAsB,YAAtB,CACA,OAAQC,UAAR,CAAoCC,WAApC,KAAuE,eAAvE,CAYA,GAAMC,CAAAA,YAAY,CAAG,CACjBC,UAAU,CAAE,KADK,CAArB,CAMA,MAAO,IAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAmF,IAAlFC,CAAAA,KAAkF,2DAAxDH,YAAwD,IAA1CI,CAAAA,MAA0C,2CAC9G,OAAQA,MAAM,CAACC,IAAf,EACI,IAAK,qBAAL,CACI,sCACOF,KADP,MAEIF,UAAU,CAAEG,MAAM,CAACH,UAFvB,GAIJ,QACI,MAAOE,CAAAA,KAAP,CAPR,CASH,CAVM,CAWP,MAAO,IAAMG,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACL,UAAD,QAAmD,CAChFI,IAAI,CAAE,qBAD0E,CAEhFJ,UAAU,CAAVA,UAFgF,CAAnD,EAA1B,CAKP,MAAO,IAAMM,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAAgBC,QAAhB,CAAqC,CAChE,MAAO,UAACC,QAAD,CAAwB,CAC3BA,QAAQ,CAACX,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAF,OAAO,CAACc,UAAR,CAAmBH,KAAnB,CAA0BC,QAA1B,EACKG,IADL,CACU,SAACC,GAAD,CAAS,CACXH,QAAQ,CAACX,WAAW,CAAC,KAAD,CAAZ,CAAR,CACAW,QAAQ,CAACJ,iBAAiB,CAAC,IAAD,CAAlB,CAAR,CACH,CAJL,EAKKQ,KALL,CAKW,SAACC,KAAD,CAAW,CACd,GAAI,CAACA,KAAK,CAACA,KAAX,CAAkB,CACdL,QAAQ,CAACZ,UAAU,CAAC,sCAAD,CAAX,CAAR,CACH,CAFD,IAEO,CACHY,QAAQ,CAACZ,UAAU,CAACiB,KAAK,CAACA,KAAP,CAAX,CAAR,CACH,CACDL,QAAQ,CAACX,WAAW,CAAC,KAAD,CAAZ,CAAR,CACH,CAZL,EAaH,CAfD,CAgBH,CAjBM","sourcesContent":["import {Dispatch} from 'redux'\nimport {AuthAPI} from '../dal/api';\nimport {setErrorAC, setErrorACType, setStatusAC, setStatusACType} from './app-reducer';\n\n\ntype setRegisterStatusACType = {\n    type: 'SET-REGISTER-STATUS'\n    isRegister: boolean\n}\n\ntype initialStateType = {\n    isRegister: boolean\n}\n\nconst initialState = {\n    isRegister: false\n}\n\ntype ActionsType = setErrorACType | setStatusACType | setRegisterStatusACType\n\nexport const registerReducer = (state: initialStateType = initialState, action: ActionsType): initialStateType => {\n    switch (action.type) {\n        case 'SET-REGISTER-STATUS':\n            return {\n                ...state,\n                isRegister: action.isRegister\n            }\n        default:\n            return state\n    }\n}\nexport const setRegisterStatus = (isRegister: boolean): setRegisterStatusACType => ({\n    type: 'SET-REGISTER-STATUS',\n    isRegister\n} as const)\n\nexport const CreateUserThunk = (email: string, password: string) => {\n    return (dispatch: Dispatch) => {\n        dispatch(setStatusAC(true))\n        AuthAPI.createUser(email, password)\n            .then((res) => {\n                dispatch(setStatusAC(false))\n                dispatch(setRegisterStatus(true))\n            })\n            .catch((error) => {\n                if (!error.error) {\n                    dispatch(setErrorAC('Some Error! More details in console.'))\n                } else {\n                    dispatch(setErrorAC(error.error))\n                }\n                dispatch(setStatusAC(false))\n            })\n    }\n}"]},"metadata":{},"sourceType":"module"}