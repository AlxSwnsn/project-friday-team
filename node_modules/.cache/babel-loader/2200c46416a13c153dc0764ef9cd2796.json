{"ast":null,"code":"import _objectSpread from\"/Users/elizavetaspivak/Documents/study/React/project-friday-team/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{setErrorAC,setStatusAC}from'./app-reducer';import{RestoreAPI}from'../dal/api';var initialState={passwordSent:false};export var newPasswordReducer=function newPasswordReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case'APP/PASSWORD-SENT':return _objectSpread(_objectSpread({},state),{},{passwordSent:action.passwordSent});default:return state;}};export var passwordSentAC=function passwordSentAC(passwordSent){return{type:'APP/PASSWORD-SENT',passwordSent:passwordSent};};export var createNewPasswordTC=function createNewPasswordTC(password,token){return function(dispatch){dispatch(setStatusAC(true));RestoreAPI.create(password,token).then(function(res){dispatch(passwordSentAC(true));dispatch(setStatusAC(false));}).catch(function(res){if(!res.error){dispatch(setErrorAC('Some Error! More details in console.'));}else{dispatch(setErrorAC(res.error));}dispatch(setStatusAC(false));});};};","map":{"version":3,"sources":["/Users/elizavetaspivak/Documents/study/React/project-friday-team/src/state/newPassword-reducer.ts"],"names":["setErrorAC","setStatusAC","RestoreAPI","initialState","passwordSent","newPasswordReducer","state","action","type","passwordSentAC","createNewPasswordTC","password","token","dispatch","create","then","res","catch","error"],"mappings":"sLACA,OAAQA,UAAR,CAAoBC,WAApB,KAAsC,eAAtC,CACA,OAAQC,UAAR,KAAyB,YAAzB,CAUA,GAAMC,CAAAA,YAAY,CAAG,CACjBC,YAAY,CAAE,KADG,CAArB,CAIA,MAAO,IAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAiE,IAAhEC,CAAAA,KAAgE,2DAAtCH,YAAsC,IAAxBI,CAAAA,MAAwB,2CAC/F,OAAQA,MAAM,CAACC,IAAf,EACI,IAAK,mBAAL,CACI,sCACOF,KADP,MAEIF,YAAY,CAAEG,MAAM,CAACH,YAFzB,GAIJ,QACI,MAAOE,CAAAA,KAAP,CAPR,CASH,CAVM,CAYP,MAAO,IAAMG,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACL,YAAD,QAA4B,CAACI,IAAI,CAAE,mBAAP,CAA4BJ,YAAY,CAAZA,YAA5B,CAA5B,EAAvB,CAGP,MAAO,IAAMM,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,QAAD,CAAmBC,KAAnB,CAAkC,CACjE,MAAO,UAACC,QAAD,CAAwB,CAC3BA,QAAQ,CAACZ,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAC,UAAU,CAACY,MAAX,CAAkBH,QAAlB,CAA4BC,KAA5B,EACKG,IADL,CACU,SAAAC,GAAG,CAAI,CACTH,QAAQ,CAACJ,cAAc,CAAC,IAAD,CAAf,CAAR,CACAI,QAAQ,CAACZ,WAAW,CAAC,KAAD,CAAZ,CAAR,CACH,CAJL,EAKKgB,KALL,CAKW,SAAAD,GAAG,CAAI,CACV,GAAI,CAACA,GAAG,CAACE,KAAT,CAAgB,CACZL,QAAQ,CAACb,UAAU,CAAC,sCAAD,CAAX,CAAR,CACH,CAFD,IAEO,CACHa,QAAQ,CAACb,UAAU,CAACgB,GAAG,CAACE,KAAL,CAAX,CAAR,CACH,CACDL,QAAQ,CAACZ,WAAW,CAAC,KAAD,CAAZ,CAAR,CACH,CAZL,EAaH,CAfD,CAgBH,CAjBM","sourcesContent":["import {Dispatch} from 'redux';\nimport {setErrorAC, setStatusAC} from './app-reducer';\nimport {RestoreAPI} from '../dal/api';\n\n\ntype ActionsType = ReturnType<typeof passwordSentAC>\n\n\ntype InitialStateType = {\n    passwordSent: boolean\n}\n\nconst initialState = {\n    passwordSent: false\n}\n\nexport const newPasswordReducer = (state: InitialStateType = initialState, action: ActionsType) => {\n    switch (action.type) {\n        case 'APP/PASSWORD-SENT':\n            return {\n                ...state,\n                passwordSent: action.passwordSent\n            }\n        default:\n            return state\n    }\n}\n\nexport const passwordSentAC = (passwordSent: boolean) => ({type: 'APP/PASSWORD-SENT', passwordSent})\n\n\nexport const createNewPasswordTC = (password: string, token: any) => {\n    return (dispatch: Dispatch) => {\n        dispatch(setStatusAC(true))\n        RestoreAPI.create(password, token)\n            .then(res => {\n                dispatch(passwordSentAC(true))\n                dispatch(setStatusAC(false))\n            })\n            .catch(res => {\n                if (!res.error) {\n                    dispatch(setErrorAC('Some Error! More details in console.'))\n                } else {\n                    dispatch(setErrorAC(res.error))\n                }\n                dispatch(setStatusAC(false))\n            })\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}