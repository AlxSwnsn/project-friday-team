{"ast":null,"code":"import _objectSpread from\"/Users/elizavetaspivak/Documents/study/React/project-friday-team/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{setErrorAC,setStatusAC}from'./app-reducer';import{RestoreAPI}from'../dal/api';var initialState={emailIsSent:false};export var passwordRecoveryReducer=function passwordRecoveryReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case'APP/EMAIL-IS-SENT':return _objectSpread(_objectSpread({},state),{},{emailIsSent:action.emailIsSent});default:return state;}};export var emailIsSentAC=function emailIsSentAC(emailIsSent){return{type:'APP/EMAIL-IS-SENT',emailIsSent:emailIsSent};};export var passwordRecoveryTC=function passwordRecoveryTC(email){return function(dispatch){dispatch(setStatusAC(true));RestoreAPI.restore(email).then(function(){dispatch(emailIsSentAC(true));dispatch(setStatusAC(false));}).catch(function(res){if(!res.error){dispatch(setErrorAC('Some Error! More details in console.'));}else{dispatch(setErrorAC(res.error));}dispatch(setStatusAC(false));});};};","map":{"version":3,"sources":["/Users/elizavetaspivak/Documents/study/React/project-friday-team/src/state/password-reducer.ts"],"names":["setErrorAC","setStatusAC","RestoreAPI","initialState","emailIsSent","passwordRecoveryReducer","state","action","type","emailIsSentAC","passwordRecoveryTC","email","dispatch","restore","then","catch","res","error"],"mappings":"sLACA,OAAQA,UAAR,CAAoBC,WAApB,KAAsC,eAAtC,CACA,OAAQC,UAAR,KAAyB,YAAzB,CAOA,GAAMC,CAAAA,YAAY,CAAG,CACjBC,WAAW,CAAE,KADI,CAArB,CAIA,MAAO,IAAMC,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,EAAiE,IAAhEC,CAAAA,KAAgE,2DAAtCH,YAAsC,IAAxBI,CAAAA,MAAwB,2CACpG,OAAQA,MAAM,CAACC,IAAf,EACI,IAAK,mBAAL,CACI,sCACOF,KADP,MAEIF,WAAW,CAAEG,MAAM,CAACH,WAFxB,GAIJ,QACI,MAAOE,CAAAA,KAAP,CAPR,CASH,CAVM,CAYP,MAAO,IAAMG,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACL,WAAD,QAA2B,CAACI,IAAI,CAAE,mBAAP,CAA4BJ,WAAW,CAAXA,WAA5B,CAA3B,EAAtB,CAEP,MAAO,IAAMM,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,KAAD,CAAmB,CACjD,MAAO,UAACC,QAAD,CAAwB,CAC3BA,QAAQ,CAACX,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAC,UAAU,CAACW,OAAX,CAAmBF,KAAnB,EACKG,IADL,CACU,UAAM,CACRF,QAAQ,CAACH,aAAa,CAAC,IAAD,CAAd,CAAR,CACAG,QAAQ,CAACX,WAAW,CAAC,KAAD,CAAZ,CAAR,CACH,CAJL,EAKKc,KALL,CAKW,SAAAC,GAAG,CAAI,CACV,GAAG,CAACA,GAAG,CAACC,KAAR,CAAc,CACVL,QAAQ,CAACZ,UAAU,CAAC,sCAAD,CAAX,CAAR,CACH,CAFD,IAEO,CACHY,QAAQ,CAACZ,UAAU,CAACgB,GAAG,CAACC,KAAL,CAAX,CAAR,CACH,CACDL,QAAQ,CAACX,WAAW,CAAC,KAAD,CAAZ,CAAR,CACH,CAZL,EAaH,CAfD,CAgBH,CAjBM","sourcesContent":["import {Dispatch} from \"redux\";\nimport {setErrorAC, setStatusAC} from './app-reducer';\nimport {RestoreAPI} from '../dal/api';\n\n\ntype InitialStateType = {\n    emailIsSent: boolean\n}\n\nconst initialState = {\n    emailIsSent: false\n}\n\nexport const passwordRecoveryReducer = (state: InitialStateType = initialState, action: ActionsType) => {\n    switch (action.type) {\n        case 'APP/EMAIL-IS-SENT':\n            return {\n                ...state,\n                emailIsSent: action.emailIsSent\n            }\n        default:\n            return state\n    }\n}\n\nexport const emailIsSentAC = (emailIsSent: boolean) => ({type: 'APP/EMAIL-IS-SENT', emailIsSent})\n\nexport const passwordRecoveryTC = (email: string) => {\n    return (dispatch: Dispatch) => {\n        dispatch(setStatusAC(true))\n        RestoreAPI.restore(email)\n            .then(() => {\n                dispatch(emailIsSentAC(true))\n                dispatch(setStatusAC(false))\n            })\n            .catch(res => {\n                if(!res.error){\n                    dispatch(setErrorAC('Some Error! More details in console.'))\n                } else {\n                    dispatch(setErrorAC(res.error))\n                }\n                dispatch(setStatusAC(false))\n            })\n    }\n}\n\ntype ActionsType = ReturnType<typeof emailIsSentAC>"]},"metadata":{},"sourceType":"module"}